# Welcome to uclgeog_msc_core: Scientific Computing 
UCL Geography: Level 7 course, Scientific Computing

![](images/ucl_logo.png)

[![Documentation Status](https://readthedocs.org/projects/uclgeog_msc_core/badge/?version=latest)](https://uclgeog_msc_core.readthedocs.io/en/latest/?badge=latest)


To install the software for this course, first make sure you have `pip` and `git` installed on your computer.

For example, if using `conda`, at the command line, type:

 	conda install git pip
	
Then use `pip` to install from github:

	pip install git+git://github.com/profLewis/uclgeog_msc_core@master


	conda config --add channels profLewis




Online Notebooks via Binder:
----------------------------
 
Run the notebooks on Binder server directly by click on different
chaper, it may take some time to start but just wait a bit....
 
[Go to full list of
notebooks](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master)
 
Go to individual chapter:
 
[Chapter0\_help](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter0_help.ipynb)
 
[Chapter1\_Python\_introduction](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter1_Python_introduction.ipynb)
 
[Chapter1\_Python\_introduction\_answers](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter1_Python_introduction_answers.ipynb)
 
[Chapter2\_Numpy\_matplotlib](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter2_Numpy_matplotlib.ipynb)
 
[Chapter2\_Numpy\_matplotlib\_answers](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter2_Numpy_matplotlib_answers.ipynb)
 
[Chapter3\_0\_GDAL](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_0_GDAL.ipynb)
 
[Chapter3\_1\_GDAL](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_1_GDAL.ipynb)
 
[Chapter3\_1\_GDAL\_answers](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_1_GDAL_answers.ipynb)
 
[Chapter3\_2\_MODIS\_download](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_2_MODIS_download.ipynb)
 
[Chapter3\_2\_MODIS\_download\_answers](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_2_MODIS_download_answers.ipynb)
 
[Chapter3\_3\_GDAL\_masking](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_3_GDAL_masking.ipynb)
 
[Chapter3\_4\_GDAL\_stacking\_and\_interpolating](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_4_GDAL_stacking_and_interpolating.ipynb)
 
[Chapter3\_4a\_GDAL\_stacking\_and\_interpolating-convolution](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_4a_GDAL_stacking_and_interpolating-convolution.ipynb)
 
[Chapter3\_5\_Movies](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_5_Movies.ipynb)
 
[Chapter3\_6A\_GDAL\_Reconciling\_projections\_prerequisites](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_6A_GDAL_Reconciling_projections_prerequisites.ipynb)
 
[Chapter3\_6\_GDAL\_Reconciling\_projections](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter3_6_GDAL_Reconciling_projections.ipynb)
 
[Chapter4\_Practical\_Part1](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter4_Practical_Part1.ipynb)
 
[Chapter5\_Linear\_models](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter5_Linear_models.ipynb)
 
[Chapter5\_Modelling\_and\_optimisation](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter5_Modelling_and_optimisation.ipynb)
 
[Chapter6\_NonLinear\_Model\_Fitting](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter6_NonLinear_Model_Fitting.ipynb)
 
[Chapter6\_NonLinear\_Model\_Fitting\_Solutions](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter6_NonLinear_Model_Fitting_Solutions.ipynb)
 
[Chapter7\_FittingPhenologyModels](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter7_FittingPhenologyModels.ipynb)
 
[Chapter7\_FittingPhenologyModels\_Solutions](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter7_FittingPhenologyModels_Solutions.ipynb)
 
[Chapter8\_Practical\_Part2](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter8_Practical_Part2.ipynb)
 
[Chapter9\_Fire\_and\_Teleconnections](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter9_Fire_and_Teleconnections.ipynb)
 
[Chapter9\_Fire\_and\_Teleconnections\_Solution](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Chapter9_Fire_and_Teleconnections_Solution.ipynb)
 
[Connection](https://mybinder.org/v2/gh/profLewis/uclgeog_msc_core/master?filepath=Connection.ipynb)



## Course information

### Course Convenor

[Prof P. Lewis](http://www.geog.ucl.ac.uk/~plewis)

N.B. 2019-20 Course Convenors: [Dr Qingling Wu](http://www.geog.ucl.ac.uk/about-the-department/people/research-staff/research-staff/qingling-wu/) 

### Course and Contributing Staff

[Prof Philip Lewis](http://www.geog.ucl.ac.uk/~plewis)  

[Dr. Jose Gomez-Dans](http://www.geog.ucl.ac.uk/about-the-department/people/research-staff/research-staff/jose-gomez-dans/)

[Dr Qingling Wu](http://www.geog.ucl.ac.uk/about-the-department/people/research-staff/research-staff/qingling-wu/)


### Purpose of this course

This course, uclgeog_msc_core Scientific Computing, is a term 1 MSc module worth 15 credits (25% of the term 1 credits) that aims to:

* impart an understanding of scientific computing
* give students a grounding in the basic principles of algorithm development and program construction
* to introduce principles of computer-based image analysis and model development

It is open to students from a number of MSc courses run by the Department of Geography UCL, but the material should be of wider value to others wishing to make use of scientific computing. 

The module will cover:

* Computing in Python
* Computing for image analysis
* Computing for environmental modelling
* Data visualisation for scientific applications

### Learning Outcomes

At the end of the module, students should:

* have an understanding of the Python programmibng language and experience of its use
* have an understanding of algorithm development and be able to use widely used scientific computing software to manipulate datasets and accomplish analytical tasks
* have an understanding of the technical issues specific to image-based analysis, model implementation and scientific visualisation

### Timetable

The course takes place over 10 weeks in term 1, in the Geography Department Unix Computing Lab (PB110) in the [Pearson Building](http://www.ucl.ac.uk/estates/roombooking/building-location/?id=003), UCL. 

Classes take place from the second week of term to the final week of term, other than Reading week. See UCL [term dates](http://www.ucl.ac.uk/staff/term-dates) for further information.

The timetable is available on the UCL Academic Calendar

### Assessment

Assessment is through two pieces of coursework, submitted in both paper form and electronically via Moodle. 

See the [Moodle page](https://moodle.ucl.ac.uk/course/view.php?id=2796) for more details.

### Useful links

[Course Moodle page](https://moodle.ucl.ac.uk/course/view.php?id=2796)  

### Python

[Python](http://www.python.org/) is a high level programming language that is freely available, relatively easy to learn and portable across different computing systems. In Python, you can rapidly develop solutions for the sorts of problems you might need to solve in your MSc courses and in the world beyond. Code written in Python is also easy to maintain, is (or should be) self-documented, and can easily be linked to code written in other languages.

Relevant features include: 

- it is automatically compiled and executed 
- code is portable provided you have the appropriate Python modules. 
- for compute intensive tasks, you can easily make calls to methods written in (faster) lower-level languages such as C or FORTRAN 
- there is an active user and development community, which means that new capabilities appear over time and there are many existing extensions and enhancements easily available to you.

For further background on Python, look over the material on [Advanced Scientific Programming in Python](https://python.g-node.org/wiki/schedule) or [python.org](http://www.python.org/) web sites.

We are assuming that you are new to computing in this course. We will not explicitly go through unix (operating system) notes, but you should make yourself familiar with the basic concepts. 

### Using the course notes

We will generally use the `jupyter` notebooks for running interactive Python programs.

### Course Notes

[Course notes](index.ipynb)  

### Help

[Help](Chapter0_help.ipynb)
[Connections to the lab](Connection.ipynb)


For users
=========

Preliminaries
-------------

The repository of these notes is [https://github.com/profLewis/uclgeog_msc_core](https://github.com/profLewis/uclgeog_msc_core).

If you navigate to that link, and look under the `Code` tab, you will see various ways you can download the notes.

The main one we will uses `git`. You should first check that you have `git` installed (e.g. type `git` in a terminal / shell window).

We also assume you are using the `conda` distribution of python. Check that you have that installed (e.g. type `conda` in a terminal / shell window).

If either of these fail, then find the approrpate downloads to install them for your computer, and try again.

Download the notes
------------------

Change directory to where you want to work, e.g. (BUT put in your own directory name!):

	cd /Users/Documents/GitHub

Make a local clone of the notes:

	git clone https://github.com/profLewis/uclgeog_msc_core.git

Install this with:

	python setup.py install && bash postBuild

Install utility codes
---------------------

Users can install the course utility codes with:

	conda install uclgeog_msc_core
	
They can then access utility codes from this:

	python -c "import uclgeog_msc_core;help(uclgeog_msc_core)"


For developers
==============

Making a conda package
----------------------

Assuming we are using conda, and that you have an anaconda cloud account (https://anaconda.org). The account associated with this project is profLewis, so we use the account [`https://anaconda.org/proflewis/`](https://anaconda.org/proflewis/) as our example. Assume we are using `conda` for packages. We follow the [anaconda instructions](https://docs.anaconda.com/anaconda-cloud/user-guide/tasks/work-with-packages/).

Package configuration is done in the file [meta.yaml](meta.yaml).

Assume we have the distribution locally in `/Users/Documents/GitHub/uclgeog_msc_core`:

	cd /Users/Documents/GitHub/uclgeog_msc_core
	
	# installs
	conda install anaconda-client conda-build conda-verify

	# To build the package, turn off automatic Client uploading and then run the conda build command:
	# All packages built in this way are placed in a subdirectory of the Anaconda conda-bld directory.
	conda config --set anaconda_upload no
	conda build .
	
	# You can check where the resulting file was placed with the --output option:
	conda build . --output
	
	# You can upload the test package to Cloud with the Anaconda upload command:
	anaconda login
	anaconda upload /path/to/conda-package.tar.bz2

The user can now access the package from this channel. They can set this up with:

	conda config --add channels profLewis
	
Then install with:

	conda install uclgeog_msc_core
	
They can then access utility codes from this:

	python -c "import uclgeog_msc_core;help(uclgeog_msc_core)"
	
Setting up Docker 
-----------------

You can set up a docker machine by simply downloading the [Dockerfile](https://raw.githubusercontent.com/profLewis/uclgeog_msc_core/master/Dockerfile) file. 

Make sure you have docker installed on your local machine.

Then `cd` to where you stored the `Dockerfile` and run:

	docker build --rm -t jupyter/geog0111 .
	
This will take some time to download and install (10s of minutes), but when it is:

	docker run -it --rm -p 8888:8888 jupyter/geog0111 start.sh jupyter lab
	
Then, to link to (my) docker space (use your own docker usename in place of `proflewis`):

	docker tag jupyter/geog0111 proflewis/geog0111
	
Upload:

	docker push proflewis/geog0111

This now exists as [https://hub.docker.com/repository/docker/proflewis/geog0111](https://hub.docker.com/repository/docker/proflewis/geog0111), and you can now simply load it as:

	docker pull proflewis/geog0111:latest

To run commands on the docker image as root, for example install:

	docker run -u 0 -it -p 8888:8888 proflewis/geog0111:latest bash -c "cd uclgeog_msc_core &&  python setup.py install && bash postBuild && conda activate uclgeog_msc_core"
	
Additional info:

To clear cache and force a reload of the repository, use:

	docker system prune -af
	
Then

	docker build --rm -t jupyter/geog0111 .

etc. as above

To update notes on docker image:

	docker run -u 0 -w /home/jovyan/uclgeog_msc_core -it proflewis/geog0111:latest bash -c "git reset --hard HEAD && git pull"
	docker run -u 0 -w /home/jovyan/uclgeog_msc_core -it proflewis/geog0111:latest bash -c "python setup.py install && bash postBuild && conda activate uclgeog_msc_core"

	
Using Docker 
------------

Make sure you install docker on you local computer, then type:

	docker pull proflewis/geog0111:latest
	
Then, run it with:

	docker run -it -w /home/jovyan/uclgeog_msc_core -p 8888:8888 proflewis/geog0111:latest start.sh jupyter notebook

